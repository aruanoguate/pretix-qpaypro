language: python
sudo: false
python:
- '3.6'
install:
- pip install -U pip wheel setuptools
- pushd ~
- git clone --depth 1 https://github.com/pretix/pretix.git
- cd pretix/src
- pip3 install -Ur requirements.txt -r requirements/dev.txt
- python setup.py develop
- make all compress
- popd
script:
- flake8 .
- isort -c -rc .
cache:
  directories:
  - "$HOME/.cache/pip"
addons:
  apt:
    packages:
    - enchant
    - myspell-de-de
    - aspell-en
deploy:
  provider: pypi
  user: aruanoguate
  password:
    secure: ZJWd9JfcMhipK25hFHgPfRKRGYXtAS0lpRzhTr+2JbhIb8PYj/1YVnxdGIVBAJbMWx5/0dOHG8uEQgHleJuD/hD+KlNAqx3WoC11UpkLfT49FY0qKaCYOD3RbJySczi2pDB/XLhkGgYIHq/bdDvv+oEbXprloZisgaucZ9g1tyXzU8eQcJ7gKFgBgTHRGaPzVSnyz2GLLqSSmLPZ986pza4xdomT/Y37XGh+xVA8BaHspk/3ddU4MqlrVL0Al80bGicwOLRR9VMn2AvAnw4wRRBAp7tWy9NL4yqonmE2Rki0lMo/ZxYel9aNAR7nHgnlp4oDhD+bZKxlrTZuPh75Lw6WJbHQ7lDXGh3kSKE7ExRIx4Up1FVenu7q2sPzhM++VztfXScR8zG2degFhua46F90zaaoHPVVnuufRugUuhVNrirP7aH+7ZUr6ExMlM9F2gW2bpADTARzCLzvWoui5013m50lmmPZXx9sLR/wTZ+VD2sY1XRbPHqAd5/3Mcmwdxg5LZyydUiN43GdtsZOdF6u4avyXEfwDNIM6en64s/aXbCMvy9Yt2Pm1LsW1vKDzBvtNC3k8X07J88EMD/41JHRdu15z+Y1uzr5O4rbhnwfdfiAHbsOfnpblw4vkJ6EQ9p18C0lyEtZ78EyY4Lgg9bG4xoBYRqtvKq4PSO1XSQ=
  on:
    tags: true
